---
title: 텀프로젝트의 추억_7.에라 모르겠다
date: 2021-01-17 06:00:00
categories: [Essay]
tags: [essay, term project]
pin: true
use_math: true
toc: true
---

4학년 1학기. 리눅스 시스템 설계 과목이었다. i.mx6q를 기반으로 한 보드에 프로그래밍하는 텀 프로젝트였다. 주제는 자유였다. 기본적인 LED, 스위치 사용에 필요한 디바이스 드라이버는 제공됐다. 추가로 주어진 매뉴얼을 통해 GPIO를 사용할 수 있었다.

***

## __상쾌한 시작__

팀은 자유여서 같은 연구실 학부 연구생끼리 하기로 했다. 수업이 끝나고 바로 프로젝트 아이디어 회의를 했는데 생각보다 매우 빨리 끝났다.  
  
스마트 스피드 게이트로 코로나로 인해 체온을 측정하는 게 필수여서 스피드 게이트에서 카드를 찍을 때 온도도 같이 측정해서 정보를 수집하고, 체온이 너무 높으면 입장을 차단하는 것이었다.  
  
졸업작품을 만들면서 리눅스에 아주 익숙해진 상태였다. 졸업작품에 비하면 굉장히 쉽게 느껴졌다.  
  
코로나 때문에 실습을 많이 하지는 못 했지만, 두렵지 않았다.  

***

## __구체적인 기능 설계__

먼저 기기에 카드를 댄다. 그러면 비접촉식 온도 센서를 이용해서 체온을 측정하고 인식된 카드에서 정보를 추출해서 해당 인원의 체온을 서버에 저장한다. 이상이 없으면 DC 모터를 동작시키고 그렇지 않다면 부저를 울려서 이상이 있다는 것을 알린다. LCD에는 이런 사항들을 표시한다. 9개의 푸시 스위치가 있는데 순서를 맞게 누르면 관리자 모드로 진입할 수 있다. 진행 상태에 따라 불이 켜지는 LED의 수가 달라졌다.  

실습 보드는 2개를 사용했는데 한 부분에서 카드를 찍고 체온을 쟤면 무선 통신으로 송신하고 다른 보드는 해당 데이터를 수신한다. 받은 패킷을 해석해서 LED도 켜지고, DC 모터도 돌아가는 등의 동작을 한다. 그리고 시리얼 포트로 윈도우 노트북과 연결해서 데이터를 전송한다. 윈도우 노트북은 서버 역할로 받은 데이터를 저장하고 화면에 출력해준다.  
  
실습 보드로 사용할 수 있는 거의 모든 기능을 사용했다. 창의성을 포기하고 복잡성을 가져갔다. 그래도 1학년 1학기와는 다르게 실제 스마트 게이트처럼 만들 생각은 하지 않았다.  

하지만 온도 센서부터 문제였다. 코로나 때문인지 비접촉식 센서가 없었다. 하는 수 없이 접촉식 온도 센서를 구매했는데 체온 측정이 잘 안 됐다. 또 실습 보드와 I2C 통신을 해야 하는데 관련된 매뉴얼이 없었다.  
  
직접 레지스터 설정해서 통신하는 법은 알았지만 디바이스 드라이버 만드는 법은 몰랐다. 특히 자료가 많은 플랫폼이 아니라 교육을 위해서 회사에서 자체적으로 개발한 경우에는 어떻게 해야 할지 몰랐다.  
  
직접 개발하는 것은 시간 낭비라고 생각하고 아두이노를 사용했다. 그리고 GPIO를 연결했다. 여유가 있으면 나중에 I2C를 구현하면 되는 것이었다. 물론 아두이노를 거치지 않고 직접 센서와 보드가 I2C 통신을 하면 좋겠지만, 그동안의 경험을 통해 보험이 필요하다는 것을 알고 있었다.  

어차피 NFC 카드 리더기도 아두이노로 구현했다. 아두이노를 안 쓴다면 실습 보드에서 I2C뿐 아니라 SPI 통신도 구현해야 했다. 통신 구현 + 디바이스 드라이버 제작까지 해야 했다.

***

## __설명서 대로 해도 안 되면 어떻게 해야 하는 지는 안 배웠다.__

다음으로 무선 통신을 위한 블루투스였다. 그런데 매뉴얼대로 해도 블루투스가 되지 않았다. 제공되는 디바이스 드라이버를 커널에 올려도 동작하지 않았다. 설정을 바꿔서 포맷 후 재설치를 반복했다. 하지만 똑같았다. 인터넷에 검색해봤지만, 자료가 한정적이었다. 책도 여러 권 빌려봐 가며 해결책을 찾아보려 했지만, 실패했다. 얼핏 블루투스는 안 된다는 말을 듣기도 했다.  
  
그동안의 경험을 종합해서 가장 합리적인 결과를 도출했다. 난 에라 모르겠다 하고 포기했다. 현명한 선택이었다.  

***

## __경험하지 못했다면 몰랐을 것__

있어 보이기 위해서는 무선 통신을 구현해야 했다. 다음으로 고려한 것이 소켓 통신이다. 하지만 될 거라는 보장이 없었다. 무모한 짓이라는 생각이 들었다. 뭔가 확실하게 될만한 것이 필요했다. 그러다 무전기를 떠올렸다.  
  
과거에 RF를 이용한 소방 알람 시스템을 개발 준비했던 적이 있다. RF 모듈 및 안테나는 쉽게 구할 수 있는 무전기를 사용했었다. 개발계획서를 제출했는데 떨어져서 버림받은 프로젝트였다.  
  
지금 상황에 딱 적절했다. 무선 통신이고, 보드는 GPIO만 사용하면 되고 실질적인 통신은 무전기랑 DTMF 모듈들로 하면 됐다. RF를 쓰면 더 있어 보일 것 같기도 했다.  

기존에 사용했던 모듈들은 다 망가졌다. 다행히 무전기는 멀쩡했다. 고장 난 것들만 새로 주문을 했다. 아슬아슬하게 평가받기 전에 물품들이 배송됐다.  
  
이후 작업은 순조로웠다. 생각한 대로 잘 진행됐다.  

***

## __평가__

교수님은 왜 굳이 무선을 썼냐고 물어보셨다. 나름대로 생각해놓은 답안이 있었는데 당황해서 제대로 대답하지 못했다. 나중에 받은 점수를 보니 점수를 좋게 주신 것 같았다. 배운 디바이스들을 많이 사용하고, GPIO를 한 번에 여러 개 사용한 것에서 가산점을 받은 모양이다.  

***

## __교훈__

대학 시절 수업에서 주어지는 마지막 텀 프로젝트였다. 그동안 쌓인 노하우들이 큰 힘을 발휘했다. 수많은 시행착오, 경험을 정리하고 기억해두면 유용하게 쓸 수 있다. 이미 지난 일이라고 기억에서 지워버리지 말고 차곡차곡 잘 쌓아두자.  

***

## __텀 프로젝트의 추억 글__

- [1.움직이지마](https://chalgx.github.io/essay/MemoriesofTermProject1)
- [2.미루지마](https://chalgx.github.io/essay/MemoriesofTermProject2)
- [3.원래 한 번에 안 되는 거야](https://chalgx.github.io/essay/MemoriesofTermProject3)
- [4.안 배웠는데](https://chalgx.github.io/essay/MemoriesofTermProject4)
- [5.잘난척](https://chalgx.github.io/essay/MemoriesofTermProject5)
- [6.고행 그리고 기도](https://chalgx.github.io/essay/MemoriesofTermProject6)
- [7.에라 모르겠다](https://chalgx.github.io/essay/MemoriesofTermProject7)
